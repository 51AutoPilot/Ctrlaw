(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1427,e=>{"use strict";var t=e.i(43476),s=e.i(22016);function a({message:e}){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center text-3xl mb-4",children:"?"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No Agents Configured"}),(0,t.jsx)("p",{className:"text-gray-500 mb-6 max-w-md",children:e||"Connect your OpenClaw agents to see live data on this page."}),(0,t.jsx)(s.default,{href:"/settings",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition",children:"Go to Settings"})]})}e.s(["NoAgentsPlaceholder",()=>a])},4555,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18509),n=e.i(1427),l=e.i(37378);function o(){let{allSessions:e,agents:o}=(0,a.useAgents)(),[i,c]=(0,s.useState)(""),[r,d]=(0,s.useState)([]),[m,g]=(0,s.useState)(!1),u=(0,s.useCallback)(async()=>{let e=o.filter(e=>"ws_connected"===e.connection.status);if(0===e.length)return;g(!0);let t=[];for(let s of e){let e=new l.GatewayClient(s.connection.config.localPort);for(let a of(e.connect(),await new Promise(e=>setTimeout(e,1e3)),s.sessions))try{let n=await e.getSessionHistory(a.id);t.push({...n,agentName:s.connection.config.name})}catch{}e.disconnect()}d(t),g(!1)},[o]);(0,s.useEffect)(()=>{o.some(e=>"ws_connected"===e.connection.status)&&u()},[o,u]);let x=e.map(e=>{let t=r.find(t=>t.session_id===e.id&&t.agentName===e.agentName),s=t?.messages.slice(0,3).map(e=>`${e.role}: ${e.content}`).join(" | ");return{id:`${e.agentName}-${e.id}`,title:e.id,content:s||`Session ${e.status}`,agentName:e.agentName,date:e.created_at||"",status:e.status,messageCount:t?.messages.length||0}}).filter(e=>e.title.toLowerCase().includes(i.toLowerCase())||e.content.toLowerCase().includes(i.toLowerCase())||e.agentName.toLowerCase().includes(i.toLowerCase()));return 0===o.length?(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Memory"}),(0,t.jsx)(n.NoAgentsPlaceholder,{message:"Connect agents to browse session conversation history."})]}):(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Memory"}),(0,t.jsx)("input",{type:"text",value:i,onChange:e=>c(e.target.value),placeholder:"Search sessions and conversations...",className:"w-full p-3 border rounded-lg mb-6"}),m&&(0,t.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:"Loading conversation history..."}),0===x.length?(0,t.jsx)("p",{className:"text-gray-500",children:0===e.length?"No sessions available from connected agents.":"No results match your search."}):(0,t.jsx)("div",{className:"space-y-4",children:x.map(e=>(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsx)("h3",{className:"font-bold text-lg truncate flex-1",children:e.title}),(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-2 whitespace-nowrap",children:e.date?new Date(e.date).toLocaleDateString():""})]}),(0,t.jsx)("p",{className:"text-gray-700 mb-3 line-clamp-2",children:e.content}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded",children:e.agentName}),(0,t.jsx)("span",{className:`px-2 py-1 text-sm rounded ${"active"===e.status||"running"===e.status?"bg-green-100 text-green-800":"completed"===e.status?"bg-gray-100 text-gray-600":"bg-yellow-100 text-yellow-800"}`,children:e.status}),e.messageCount>0&&(0,t.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-sm rounded",children:[e.messageCount," messages"]})]})]},e.id))})]})}e.s(["default",()=>o])}]);